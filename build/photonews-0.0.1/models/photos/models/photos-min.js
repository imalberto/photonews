YUI.add("models/photos",function(e,t,n,r){"use strict";var i=n["models/photo"]["default"],s=n.yql.YQL,o=n.yui.config,u=n.pn.PN,a=u.ModelList.extend({model:i,API_KEY:"84921e87fb8f2fc338c3ff9bf51a412e",initializer:function(e){this.config=e},sync:function(e,t,n){if(e!=="read")return n(new Error("action not supported: "+e));if(typeof window!="undefined"&&o.global.DATA&&o.global.DATA.photos){var r=o.global.DATA.photos;if(r.items&&r.items.length>0)return n(null,r.items)}this.search(t.query,1,t.count*30,function(e,t){n(e,t)})},_process:function(e,t){var n=[],r,i;t.query=t.query||{},t.query.count=t.query.count||0,console.log("Found %s photos",t.query.count);if(t.query.count===0)return n;for(i=0;i<t.query.count;i+=1)r=t.query.results.photo[i],r.url=r.url_m,r["data-width"]=r.width_m,r["data-height"]=r.height_m,r.title=r.title?r.title:e+":"+i,n.push({id:r.id,index:i,title:r.title,url:r.url,"data-height":r["data-height"],"data-width":r["data-width"],user:r.ownername});return n},search:function(e,t,n,r){var i=this,o;e=e||"eiffel",n/=1,t/=1,o="select * from flickr.photos.search ("+(t||0)+","+(n||4)+") "+'where has_geo="true" and '+'tags="'+e+'"'+'and extras="owner_name,url_s,url_n,url_m" '+'and api_key="'+this.API_KEY+'"',s(o,function(t){var n=i._process(e,t);r(null,n)},{},{proto:"https"})},photosMock:function(){return{query:{count:13,created:"2013-11-21T19:37:59Z",lang:"en-US",results:{photo:[{farm:"4",id:"10969304735",isfamily:"0",isfriend:"0",ispublic:"1",owner:"23020238@N04",ownername:"Miscolo",secret:"21304f8c7d",server:"3707",title:"Paris 01"},{farm:"8",id:"10967732045",isfamily:"0",isfriend:"0",ispublic:"1",owner:"45989911@N06",ownername:"JF Morazzani",secret:"508937b141",server:"7427",title:"Paris 2013"},{farm:"3",id:"10967711693",isfamily:"0",isfriend:"0",ispublic:"1",owner:"29672764@N04",ownername:"pedritop (www.ppedreira.com)",secret:"6dc25d03f8",server:"2836",title:"Torre Eiffel"},{farm:"6",id:"10962734554",isfamily:"0",isfriend:"0",ispublic:"1",owner:"62077150@N06",ownername:"gregorywass",secret:"78766528ff",server:"5549",title:"Paris, 1990"},{farm:"4",id:"10959609953",isfamily:"0",isfriend:"0",ispublic:"1",owner:"50158335@N03",ownername:"Alexandre LC",secret:"a0717e30d6",server:"3759",title:"Paris1"},{farm:"4",id:"10958887276",isfamily:"0",isfriend:"0",ispublic:"1",owner:"36336201@N00",ownername:"Scottmh",secret:"4fbd02bd42",server:"3804",title:"Eiffel Tower"},{farm:"8",id:"10951853275",isfamily:"0",isfriend:"0",ispublic:"1",owner:"26045503@N05",ownername:"schmollmolch",secret:"cbc320b9dc",server:"7303",title:"<3"},{farm:"4",id:"10950075626",isfamily:"0",isfriend:"0",ispublic:"1",owner:"29672764@N04",ownername:"pedritop (www.ppedreira.com)",secret:"cb4ef5301c",server:"3826",title:"Vista desde la torre eiffel"},{farm:"3",id:"10934357666",isfamily:"0",isfriend:"0",ispublic:"1",owner:"45115614@N05",ownername:"R.G. Photographe",secret:"81436cd0b4",server:"2889",title:"Mercure admirant le coucher de soleil sur la Tour Eiffel. PARIS"},{farm:"3",id:"10931315673",isfamily:"0",isfriend:"0",ispublic:"1",owner:"96536076@N07",ownername:"Andrea Moscato",secret:"2fc37466f2",server:"2867",title:"Tour Eiffel - Paris, France"},{farm:"3",id:"10930927194",isfamily:"0",isfriend:"0",ispublic:"1",owner:"29672764@N04",ownername:"pedritop (www.ppedreira.com)",secret:"37ab648d70",server:"2828",title:"A falta de una novia..."},{farm:"4",id:"10928752686",isfamily:"0",isfriend:"0",ispublic:"1",owner:"52371140@N02",ownername:"M. Levaillant",secret:"9035bf61ab",server:"3731",title:"IMG_9016"},{farm:"8",id:"10922452074",isfamily:"0",isfriend:"0",ispublic:"1",owner:"52371140@N02",ownername:"M. Levaillant",secret:"c968329846",server:"7360",title:"IMG_9110-Edit"}]}}}}});return r["default"]=a,r},"@VERSION@",{es:!0,requires:["models/photo","yql","yui","pn"]});
